# 通义千问视觉语言模型(Qwen-VL)智能识别助手

这是一个基于阿里云通义千问视觉语言模型(Qwen-VL)的智能应用，具备多种图像分析和创意生成功能：

- 📸 **图像识别**：详细描述图片内容
- 📝 **看图写作文**：根据图片自动生成精彩作文
- 🧮 **看图解题**：分析并解答图中的题目
- 🍔 **食物热量查询**：识别食物并提供营养信息
- 🛒 **商品信息查询**：识别商品并提供购买链接
- 📚 **创意内容生成**：根据图片创作故事、诗歌或科普文章
- 🎨 **AI绘画**：根据文字描述生成图像，支持多种艺术风格

## 功能特点

- 通过通义千问视觉语言模型进行图像识别和分析
- 智能写作：生成与图片相关的作文、故事和诗歌
- 数学解题：识别并解答数学、物理等学科题目
- 食物热量数据库查询
- 商品购买链接生成
- 用户友好的Web界面
- AI绘画功能：
  - 多种风格选择：写实、油画、水彩、二次元、赛博朋克等15种风格
  - 图像变体生成：基于上传图片创建变化版本
  - 质量选择：支持标准、高清和超清分辨率

## 安装与使用

1. 安装依赖：
   ```
   pip install -r requirements.txt
   ```

2. 配置API密钥：
   创建一个`.env`文件，并添加你的API密钥：
   ```
   QWEN_API_KEY=你的通义千问API密钥
   STABILITY_API_KEY=你的Stability AI图像生成API密钥（可选）
   ```

3. 运行应用：
   ```
   streamlit run app.py
   ```

4. 在网页界面上传图片或输入文字描述，选择需要的功能并查看结果

## 使用场景

### 学习辅助
- 上传题目图片获取详细解题过程
- 分析图表并生成科普解释
- 利用图片内容生成参考作文

### 内容创作
- 根据图片生成故事和诗歌
- 为摄影作品创作配文
- 生成基于视觉内容的创意文案
- 通过文字描述创建独特的图像插图

### 日常实用
- 识别食物并获取热量信息
- 扫描商品获取购买链接
- 分析和描述复杂图像内容

### 艺术创作
- 将文字创意转化为视觉图像
- 尝试不同艺术风格的图像创作
- 基于照片创建风格化的艺术变体

## 高级用法

应用支持多种任务类型和自定义提示，您可以：
- 同时执行多个任务（如识别+作文+解题）
- 自定义每种任务的提示语
- 保存生成的内容为文本文件
- 在AI绘画中设置负面提示词，控制不想出现的元素
- 使用种子值复现特定的生成结果

## AI绘画详细功能

### 文本生成图像
1. 输入描述文本，例如"日落时分，一片金色麦田，远处有一座风车"
2. 选择风格：写实、油画、水彩、插画、二次元、像素艺术、赛博朋克等
3. 选择生成质量：标准(512x512)、高清(768x768)或超清(1024x1024)
4. 可选设置负面提示词，排除不想要的元素
5. 生成完成后可以直接下载图像

### 图像变体生成
1. 上传原始图像
2. 调整变化强度（0.1-1.0）
3. 生成具有相似特征但风格变化的新图像

### 模拟模式
如果未配置Stability API密钥，应用会自动切换到模拟模式，使用本地算法生成示例图像。

## 注意事项

- 需要有效的通义千问API密钥，可以在阿里云获取
- AI绘画功能需要Stability AI API密钥（可选，未提供时使用模拟模式）
- 食物热量信息和商品链接的准确性依赖于模型识别结果和数据库匹配
- 解题功能主要支持清晰可见的题目，复杂公式可能影响识别准确性

## 部署指南

### 部署到Streamlit Cloud

1. 在[Streamlit Cloud](https://streamlit.io/cloud)创建账号
2. 将代码推送到GitHub仓库
3. 在Streamlit Cloud中连接仓库
4. 设置环境变量`QWEN_API_KEY`和`STABILITY_API_KEY`
5. 点击部署

### 部署到Heroku

1. 安装[Heroku CLI](https://devcenter.heroku.com/articles/heroku-cli)
2. 登录Heroku：
   ```
   heroku login
   ```
3. 创建Heroku应用：
   ```
   heroku create 你的应用名称
   ```
4. 设置环境变量：
   ```
   heroku config:set QWEN_API_KEY=你的密钥
   heroku config:set STABILITY_API_KEY=你的密钥
   ```
5. 部署应用：
   ```
   git add .
   git commit -m "准备部署"
   git push heroku main
   ```

### 部署到其他云平台

对于其他云平台（如阿里云、腾讯云、华为云等），您可以：

1. 创建一个Docker容器：
   ```
   # Dockerfile
   FROM python:3.9-slim
   
   WORKDIR /app
   
   COPY . .
   RUN pip install -r requirements.txt
   
   EXPOSE 8501
   
   CMD ["streamlit", "run", "app.py"]
   ```

2. 构建并推送Docker镜像到容器仓库
3. 在云平台上部署容器，并设置环境变量`QWEN_API_KEY`和`STABILITY_API_KEY`

## 技术实现

- 通义千问API：图像识别、文本生成和解答问题
- Stability AI API：文本到图像生成和图像变体创建
- Streamlit：构建用户友好的Web界面
- NumPy/SciPy：图像处理和数据分析
- 自定义风格引擎：为不同场景提供优化的提示词增强